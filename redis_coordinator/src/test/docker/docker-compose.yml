version: '3.8'
services:
  redis1:
    container_name: redis1
    hostname: redis1
    image: redis:latest
    restart: always
    ports:
      - '6000:6000'
    networks:
      - redis-test-network

  redis2:
    container_name: redis2
    hostname: redis2
    image: redis:latest
    restart: always
    command: --port '6380'
    ports:
      - '6001:6001'
    networks:
      - redis-test-network

  redis3:
    container_name: redis3
    hostname: redis3
    image: redis:latest
    restart: always
    command: --port '6381'
    ports:
      - '6002:6002'
    networks:
      - redis-test-network

  redis-coordinator:
    container_name: redis-coordinator
    image: ngnhub/redis-coordinator:latest
    restart: always
    ports:
      - "8084:8084"
      - "5005:5005"
    environment:
      - JAVA_TOOL_OPTIONS=-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:5005
    networks:
      - redis-test-network

  server_storage: #todo better ideas?
    container_name: server_storage
    hostname: server_storage
    image: redis:latest
    restart: always
    command: --port '6300'
    ports:
      - '6004:6004'
    volumes:
      - ../server_storage:/data
    networks:
      - redis-test-network

networks:
  redis-test-network:
    driver: bridge
